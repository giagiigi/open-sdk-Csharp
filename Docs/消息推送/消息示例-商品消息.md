## 商品消息

### 商品状态事件 ITEM_STATE
| 商品状态事件 | status 值 |
| --- | --- |
| 商品删除 | ITEM_DELETE |
| 部分售罄（多sku商品某sku售罄） | SOLD_OUT_PART |
| 全部售罄 | SOLD_OUT_ALL |
| 售罄恢复 | SOLD_OUT_REVERT |
| 商品上架 | ITEM_SALE_UP |
| 商品下架 | ITEM_SALE_DOWN |

#### 消息结构示例
``` json
{
    "client_id":"6cd25b3f99727975b5",
    "id":"344692686",
    "kdt_id":164932,
    "mode":1,
    "msg":"%7B%22data%22%3A%22%7B%5C%22item_id%5C%22%3A344692686%2C%5C%22alias%5C%22%3A%5C%223nrnrvzymwlv8%5C%22%2C%5C%22kdt_id%5C%22%3A164932%2C%5C%22is_display%5C%22%3A0%7D%22%2C%22change_fields%22%3A%22%5B%5C%22is_display%5C%22%5D%22%7D",
    "sendCount":0,
    "sign":"482a1be6963e8a524ed913b2917412ef",
    "status":"ITEM_SALE_DOWN",
    "test":false,
    "type":"ITEM_STATE",
    "version":1502101079000
}
```

#### msg参数字段含义
| 字段             | 类型 | 描述                     |
| ------------------ | ------ | -------------------------- |
| change_fields      | string | 发生数据变更的参数             |
| item_id                 | Long   | 商品Id                       |
| alias              | String | 商品别名                      |
| kdt_id              | Long   | 店铺id                       |
| title              | String | 标题                         |
| price              | Long   | 价格(分)                      |
| origin             | String | 显示在原价那里的信息                 |
| postage            | Long   | 统一运费                       |
| content            | String | 内容                         |
| created_time        | Date   | 创建时间                       |
| update_time         | Date   | 最后更新时间                     |
| num                | int    | 序号                         |
| is_display          | int    | 是否显示（上架） 0：下架 1：上架 |
| is_delete           | int    | 是否标记删除 0：否 1：是             |
| goods_type          | int    | 0 默认类型，1 拍卖 10 分销          |
| sold_status         | int    | 1,发售中 2,已售罄 3,部分售罄         |
| star               | int    | 加星                         |
| remark             | String | 备注                         |
| goods_no            | String | 商家编码，等同于item_no                         |
| is_virtual          | int    | 是否虚拟商品，1是，0否               |
| quota              | int    | 用户购买限额                     |
| messages           | String | 留言信息，json                  |
| class1             | String | 一级品类                       |
| class2             | String | 二级品类                       |
| is_lock             | int    | 是否锁定 1:是;0:否;              |
| start_sold_time      | int    | 上架时间                       |
| join_level_discount  | int    | 是否参加会员折扣，默认：0 不参加          |
| delivery_template_id | Long   | 运费模板ＩＤ                     |
| goods_platform      | int    | 商品参与平台 10：分销平台             |
| tag                | String | 商品分类                       |
| hide_stock          | int    | 隐藏库存                       |
| total_stock         | int    | 总库存                        |
| picture            | String | 图片                         |
| picture_height      | int    | 图片高度                       |
| sold_time           | int    | 开卖时间                       |
| total_id            | int    | 综合SKUID                    |
| total_sold_num       | int    | 总销量                        |
| total_price         | int    | SKU 最低价                    |
| supplier_kdt_id      | Long   | 供货商店铺Id                    |
| supplier_goods_id    | Long   | 供货商商品 ID                   |

### 商品基础信息事件 ITEM_INFO
| 商品基础信息事件 | status 值 |
| --- | --- |
| 商品新增 | ITEM_CREATE |
| 商品编辑 | ITEM_UPDATE |

#### 消息结构示例
``` json
{
    "client_id":"6cd25b3f99727975b5",
    "id":"345626064",
    "kdt_id":63077,
    "mode":1,
    "msg":"%7B%22data%22%3A%22%7B%5C%22item_id%5C%22%3A345626064%2C%5C%22alias%5C%22%3A%5C%2226xs37045tldh%5C%22%2C%5C%22kdt_id%5C%22%3A63077%2C%5C%22title%5C%22%3A%5C%22moyutest%5C%22%2C%5C%22tag%5C%22%3A%5C%22%5B1689010%5D%5C%22%2C%5C%22picture%5C%22%3A%5C%22%5B%7B%5C%5C%5C%22width%5C%5C%5C%22%3A%5C%5C%5C%221200%5C%5C%5C%22%2C%5C%5C%5C%22id%5C%5C%5C%22%3A%5C%5C%5C%22837494011%5C%5C%5C%22%2C%5C%5C%5C%22url%5C%5C%5C%22%3A%5C%5C%5C%22http%3A%5C%5C%5C%5C%2F%5C%5C%5C%5C%2Fimg.yzcdn.cn%5C%5C%5C%5C%2Fupload_files%5C%5C%5C%5C%2F2017%5C%5C%5C%5C%2F08%5C%5C%5C%5C%2F07%5C%5C%5C%5C%2FFp8Dndh1awYSyIbUHILFzewTE8Ko.gif%5C%5C%5C%22%2C%5C%5C%5C%22height%5C%5C%5C%22%3A%5C%5C%5C%221200%5C%5C%5C%22%7D%5D%5C%22%7D%22%2C%22change_fields%22%3A%22%5B%5C%22title%5C%22%2C%5C%22tag%5C%22%2C%5C%22picture%5C%22%5D%22%7D",
    "sendCount":0,
    "sign":"241acd90222efad511739aa1d1157dac",
    "status":"ITEM_UPDATE",
    "test":false,
    "type":"ITEM_INFO",
    "version":1502112936000
}
```

#### msg参数字段含义
与商品状态事件 ITEM_STATE 的参数字段含义相同。

### 商品消息V1
2017年12月31日将停止推送，请尽早更换使用上述新版的消息

#### 消息结构示例
``` json
{
          "mode": 0,
          "msg": "%7B%22alias%22%3A%222xmjk3auyhfv8%22%2C%22buyUrl%22%3A%22%22%2C%22buyWay%22%3A1%2C%22class1%22%3A7%2C%22class2%22%3A%220%22%2C%22components%22%3A%22%7B%5C%221%5C%22%3A%7B%5C%22size_type%5C%22%3A%5C%220%5C%22%2C%5C%22goods%5C%22%3A%5B%7B%5C%22is_virtual%5C%22%3A%5C%222%5C%22%2C%5C%22sub_title%5C%22%3A%5C%22%5C%22%2C%5C%22image_url%5C%22%3A%5C%22https%3A%2F%2Fimg.yzcdn.cn%2Fupload_files%2F2015%2F05%2F14%2Fc682c70c5667b6af4df321707aef59e9.jpg%5C%22%2C%5C%22origin%5C%22%3A%5C%22%E5%8E%9F%E4%BB%B7%EF%BC%9A%EF%BF%A51999.00%5C%22%2C%5C%22buy_url%5C%22%3A%5C%22%5C%22%2C%5C%22buy_way%5C%22%3A%5C%221%5C%22%2C%5C%22title%5C%22%3A%5C%22%E8%99%9A%E6%8B%9F%E5%95%86%E5%93%81%E6%BC%94%E7%A4%BA%EF%BC%9A%E6%9C%89%E8%B5%9EKTV%E6%AC%A2%E5%94%B13%E5%B0%8F%E6%97%B6%E4%BC%98%E6%83%A0%E5%8D%B7%5C%22%2C%5C%22url%5C%22%3A%5C%22https%3A%2F%2Fh5.youzan.com%2Fv2%2Fshowcase%2Fgoods%3Falias%3D1ecd6rqjh%5C%22%2C%5C%22total_stock%5C%22%3A%5C%229999%5C%22%2C%5C%22postage%5C%22%3A%5C%220%5C%22%2C%5C%22price%5C%22%3A%5C%220.01%5C%22%2C%5C%22width%5C%22%3A640%2C%5C%22alias%5C%22%3A%5C%221ecd6rqjh%5C%22%2C%5C%22id%5C%22%3A%5C%225343977%5C%22%2C%5C%22sold_status%5C%22%3A%5C%221%5C%22%2C%5C%22image_id%5C%22%3A%5C%22192775895%5C%22%2C%5C%22height%5C%22%3A640%7D%5D%2C%5C%22type%5C%22%3A%5C%22goods%5C%22%2C%5C%22title%5C%22%3A%5C%220%5C%22%2C%5C%22default_image_url%5C%22%3A%5C%22%5C%22%2C%5C%22cart%5C%22%3A%5C%221%5C%22%2C%5C%22show_wish_btn%5C%22%3A%5C%220%5C%22%2C%5C%22size%5C%22%3A%5C%223%5C%22%2C%5C%22price%5C%22%3A%5C%221%5C%22%2C%5C%22buy_btn_type%5C%22%3A%5C%223%5C%22%2C%5C%22show_sub_title%5C%22%3A%5C%220%5C%22%2C%5C%22buy_btn%5C%22%3A%5C%221%5C%22%2C%5C%22wish_btn_type%5C%22%3A%5C%221%5C%22%2C%5C%22disableEdit%5C%22%3Afalse%7D%2C%5C%222%5C%22%3A%7B%5C%22link%5C%22%3A%5C%22http%3A%2F%2Fwap.koudaitong.com%2Fv2%2Fshowcase%2Fcomponent%3Falias%3Dxvw1gm83%5C%22%2C%5C%22_id%5C%22%3A%5C%2247988%5C%22%2C%5C%22type%5C%22%3A%5C%22component%5C%22%2C%5C%22title%5C%22%3A%5C%22%E6%BC%94%E7%A4%BA%5C%22%2C%5C%22disableEdit%5C%22%3Afalse%7D%7D%22%2C%22componentsExtraId%22%3A0%2C%22content%22%3A%22%E5%93%88%E5%93%88%E5%93%88%E5%93%88%E5%93%88%E5%93%88%EF%BC%8C%E5%8E%89%E5%AE%B3%E7%9A%84%E6%BC%94%E7%A4%BA%3Ctable%3E%3Ctbody%3E%3Ctr+class%3D%5C%22firstRow%5C%22%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%22%2C%22createdTime%22%3A1475068620000%2C%22deliveryTemplateId%22%3A0%2C%22freezingEndtime%22%3A-62170185600000%2C%22goodsNo%22%3A%22hello%22%2C%22goodsPlatform%22%3A0%2C%22goodsType%22%3A0%2C%22hideStock%22%3A0%2C%22id%22%3A304752225%2C%22invoice%22%3A0%2C%22isDelete%22%3A0%2C%22isDisplay%22%3A4%2C%22isLock%22%3A0%2C%22isVirtual%22%3A0%2C%22joinLevelDiscount%22%3A1%2C%22kdtId%22%3A164932%2C%22mark%22%3A0%2C%22messages%22%3A%22%5B%7B%5C%22multiple%5C%22%3A1%2C%5C%22disable_edit_name%5C%22%3Afalse%2C%5C%22type%5C%22%3A%5C%22text%5C%22%2C%5C%22disable_type%5C%22%3Afalse%2C%5C%22required%5C%22%3A%5C%221%5C%22%2C%5C%22datetime%5C%22%3A%5C%220%5C%22%2C%5C%22disable_multiple%5C%22%3Afalse%2C%5C%22disable%5C%22%3Afalse%2C%5C%22name%5C%22%3A%5C%22%5C%5Cu6587%5C%5Cu672c%5C%22%2C%5C%22disable_required%5C%22%3Afalse%2C%5C%22disable_delete%5C%22%3Afalse%7D%2C%7B%5C%22multiple%5C%22%3A0%2C%5C%22disable_edit_name%5C%22%3Afalse%2C%5C%22type%5C%22%3A%5C%22tel%5C%22%2C%5C%22disable_type%5C%22%3Afalse%2C%5C%22required%5C%22%3A%5C%221%5C%22%2C%5C%22datetime%5C%22%3A%5C%220%5C%22%2C%5C%22disable_multiple%5C%22%3Afalse%2C%5C%22disable%5C%22%3Afalse%2C%5C%22name%5C%22%3A%5C%22%5C%5Cu6570%5C%5Cu5b57%5C%22%2C%5C%22disable_required%5C%22%3Afalse%2C%5C%22disable_delete%5C%22%3Afalse%7D%2C%7B%5C%22multiple%5C%22%3A0%2C%5C%22disable_edit_name%5C%22%3Afalse%2C%5C%22type%5C%22%3A%5C%22date%5C%22%2C%5C%22disable_type%5C%22%3Afalse%2C%5C%22required%5C%22%3A%5C%221%5C%22%2C%5C%22datetime%5C%22%3A%5C%220%5C%22%2C%5C%22disable_multiple%5C%22%3Afalse%2C%5C%22disable%5C%22%3Afalse%2C%5C%22name%5C%22%3A%5C%22%5C%5Cu65e5%5C%5Cu671f%5C%22%2C%5C%22disable_required%5C%22%3Afalse%2C%5C%22disable_delete%5C%22%3Afalse%7D%2C%7B%5C%22multiple%5C%22%3A0%2C%5C%22disable_edit_name%5C%22%3Afalse%2C%5C%22type%5C%22%3A%5C%22email%5C%22%2C%5C%22disable_type%5C%22%3Afalse%2C%5C%22required%5C%22%3A%5C%221%5C%22%2C%5C%22datetime%5C%22%3A%5C%220%5C%22%2C%5C%22disable_multiple%5C%22%3Afalse%2C%5C%22disable%5C%22%3Afalse%2C%5C%22name%5C%22%3A%5C%22%5C%5Cu90ae%5C%5Cu4ef6%5C%22%2C%5C%22disable_required%5C%22%3Afalse%2C%5C%22disable_delete%5C%22%3Afalse%7D%2C%7B%5C%22multiple%5C%22%3A0%2C%5C%22disable_edit_name%5C%22%3Afalse%2C%5C%22type%5C%22%3A%5C%22time%5C%22%2C%5C%22disable_type%5C%22%3Afalse%2C%5C%22required%5C%22%3A%5C%221%5C%22%2C%5C%22datetime%5C%22%3A%5C%220%5C%22%2C%5C%22disable_multiple%5C%22%3Afalse%2C%5C%22disable%5C%22%3Afalse%2C%5C%22name%5C%22%3A%5C%22%5C%5Cu65f6%5C%5Cu95f4%5C%22%2C%5C%22disable_required%5C%22%3Afalse%2C%5C%22disable_delete%5C%22%3Afalse%7D%2C%7B%5C%22multiple%5C%22%3A0%2C%5C%22disable_edit_name%5C%22%3Afalse%2C%5C%22type%5C%22%3A%5C%22id_no%5C%22%2C%5C%22disable_type%5C%22%3Afalse%2C%5C%22required%5C%22%3A%5C%221%5C%22%2C%5C%22datetime%5C%22%3A%5C%220%5C%22%2C%5C%22disable_multiple%5C%22%3Afalse%2C%5C%22disable%5C%22%3Afalse%2C%5C%22name%5C%22%3A%5C%22%5C%5Cu8eab%5C%5Cu4efd%5C%5Cu8bc1%5C%5Cu53f7%5C%22%2C%5C%22disable_required%5C%22%3Afalse%2C%5C%22disable_delete%5C%22%3Afalse%7D%2C%7B%5C%22multiple%5C%22%3A0%2C%5C%22disable_edit_name%5C%22%3Afalse%2C%5C%22type%5C%22%3A%5C%22image%5C%22%2C%5C%22disable_type%5C%22%3Afalse%2C%5C%22required%5C%22%3A%5C%221%5C%22%2C%5C%22datetime%5C%22%3A%5C%220%5C%22%2C%5C%22disable_multiple%5C%22%3Afalse%2C%5C%22disable%5C%22%3Afalse%2C%5C%22name%5C%22%3A%5C%22%5C%5Cu56fe%5C%5Cu7247%5C%22%2C%5C%22disable_required%5C%22%3Afalse%2C%5C%22disable_delete%5C%22%3Afalse%7D%5D%22%2C%22num%22%3A0%2C%22origin%22%3A%22%E5%8E%9F%E4%BB%B7%EF%BC%9A%EF%BF%A59999.00%22%2C%22outId%22%3A%22%22%2C%22picture%22%3A%22%5B%7B%5C%22width%5C%22%3A%5C%22640%5C%22%2C%5C%22id%5C%22%3A%5C%22192782683%5C%22%2C%5C%22url%5C%22%3A%5C%22upload_files%2F2015%2F05%2F14%2F25984e9e4813787ee351083990b0c510.jpg%5C%22%2C%5C%22height%5C%22%3A%5C%22640%5C%22%7D%5D%22%2C%22pictureHeight%22%3A320%2C%22postage%22%3A0%2C%22price%22%3A1%2C%22quota%22%3A0%2C%22remark%22%3A%22%22%2C%22snapKey%22%3A%22e730787de2fae2cd0d2a9ba2f56b33f3%22%2C%22soldStatus%22%3A1%2C%22soldTime%22%3A0%2C%22source%22%3A0%2C%22star%22%3A0%2C%22startSoldTime%22%3A0%2C%22status%22%3A0%2C%22subTitle%22%3A%22%22%2C%22supplierGoodsId%22%3A0%2C%22supplierKdtId%22%3A0%2C%22tag%22%3A%22%5B92454223%2C13564744%5D%22%2C%22takeDownTime%22%3A0%2C%22thirdUserId%22%3A0%2C%22title%22%3A%22%E7%95%99%E8%A8%80%2F%E5%A4%9Asku%E6%B5%8B%E8%AF%95%22%2C%22totalId%22%3A36048871%2C%22totalPrice%22%3A0%2C%22totalSoldNum%22%3A3%2C%22totalStock%22%3A5994%2C%22updateTime%22%3A1490273905000%2C%22warranty%22%3A0%7D",
          "test": false,
          "sign": "589dfe19c2294c0022b162ab5a26628b",
          "sendCount": 1,
          "type": "ITEM",
          "version": 1490273905613,
          "kdt_id": 164932,
          "id": "304752225201703232058250R1D8q",
          "app_id": "2a139366d582f482d8"
}
```
#### msg参数字段含义
| 字段             | 类型 | 释义                     |
| ------------------ | ------ | -------------------------- |
| id                 | Long   | 商品Id                       |
| alias              | String | 商品别名                       |
| kdtId              | Long   | 店铺id                       |
| title              | String | 标题                         |
| price              | Long   | 价格(分)                      |
| origin             | String | 显示在原价那里的信息                 |
| postage            | Long   | 统一运费                       |
| content            | String | 内容                         |
| createdTime        | Date   | 创建时间                       |
| updateTime         | Date   | 最后更新时间                     |
| num                | int    | 序号                         |
| isDisplay          | int    | 是否显示（上架） 0：未发布 1：发布 （正常状态） |
| isDelete           | int    | 是否标记删除 0：否 1：是             |
| goodsType          | int    | 0 默认类型，1 拍卖 10 分销          |
| soldStatus         | int    | 1,发售中 2,已售罄 3,部分售罄         |
| star               | int    | 加星                         |
| remark             | String | 备注                         |
| goodsNo            | String | 货号                         |
| isVirtual          | int    | 是否虚拟商品，1是，0否               |
| quota              | int    | 用户购买限额                     |
| messages           | String | 留言信息，json                  |
| class1             | String | 一级品类                       |
| class2             | String | 二级品类                       |
| isLock             | int    | 是否锁定 1:是;0:否;              |
| startSoldTime      | int    | 上架时间                       |
| joinLevelDiscount  | int    | 是否参加会员折扣，默认：0 不参加          |
| source             | int    | 0 自建 1导入 2 api             |
| outId              | String | 外部ID                       |
| takeDownTime       | int    | 下架时间                       |
| deliveryTemplateId | Long   | 运费模板ＩＤ                     |
| goodsPlatform      | int    | 商品参与平台 10：分销平台             |
| tag                | String | 商品分类                       |
| hideStock          | int    | 隐藏库存                       |
| totalStock         | int    | 总库存                        |
| picture            | String | 图片                         |
| pictureHeight      | int    | 图片高度                       |
| soldTime           | int    | 开卖时间                       |
| totalId            | int    | 综合SKUID                    |
| totalSoldNum       | int    | 总销量                        |
| totalPrice         | int    | SKU 最低价                    |
| supplierKdtId      | Long   | 供货商店铺Id                    |
| supplierGoodsId    | Long   | 供货商商品 ID                   |