## 签名调用
![签名调用](https://img.yzcdn.cn/public_files/2017/03/28/67fb4a4995842a3445de3db9450d2b0a.png)

### 系统参数
请求URL：https://open.youzan.com/api/entry/

| 名称          | 类型     | 是否必须 | 描述                                       |
| ----------- | ------ | ---- | ---------------------------------------- |
| app_id      | String | 必须   | AppID [在这里获取 AppId 和 AppSecret](https://youzan.com/v2/apps/open/setting) |
| method      | String | 必须   | API接口名称                                  |
| timestamp   | String | 必须   | 时间戳，格式为yyyy-mm-dd HH:mm:ss，例如：2017-03-28 13:52:03 有赞云服务端允许请求时间误差为10分钟。 |
| format      | String | 否    | 可选，指定响应格式。默认json，目前支持格式为json             |
| v           | String | 必须   | API协议版本，可选值:1.0                          |
| sign        | String | 必须   | 对 API 输入参数进行 md5 加密获得，详细参考签名章节           |
| sign_method | String | 否    | 可选，参数的加密方法选择。默认为md5，可选值是：md5             |

### 应用参数
视具体要调用的API而定，请看[API文档](http://www.youzanyun.com/apilist)

### 签名方法
调用 API 时需要对请求参数进行签名验证，有赞云会对该请求参数进行验证是否合法。
``` json
方法：根据参数名称（除签名和图片文件）将所有请求参数按照字母先后顺序排序:key + value .... key + value

例如：将foo=1,bar=2,baz=3 排序为bar=2,baz=3,foo=1，参数名和参数值链接后，得到拼装字符串bar2baz3foo1

暂时只支持MD5加密方式：将 app_secret 拼接到参数字符串头、尾进行md5加密，md5(secretkey1value1key2value2...secret)

注：我们需要的是32位的字符串，字母全部小写（如果是md5出来的是大写字母，请转为小写），图片文件参数不用加入签名。
```

### 调用示例
调用API：kdt.item.get ，应用参数 num_iid=3838293428 ，使用MD5加密，因为各开发语言语法不一致，以下实例只体现逻辑。为便于说明，假设 app_id、app_secret 值均为 test。

1、输入参数
``` json
    method=kdt.item.get
    timestamp=2017-03-28 13:52:03
    format=json
    app_id=test
    v=1.0
    sign_method=md5
    num_iid=3838293428
```

2、按照参数名称升序排列
``` json
    app_id=test
    format=json
    method=kdt.item.get
    num_iid=3838293428
    sign_method=md5
    timestamp=2013-05-06 13:52:03
    v=1.0
```

3、连接参数名与参数值,并在首尾加上secret，如下：
``` json
    testapp_idtestformatjsonmethodkdt.item.getnum_iid3838293428sign_methodmd5timestamp2017-03-28 13:52:03v1.0test
```

4、生成签名sign：
    32位小写的MD5值 -> ec9aabe3d7d54ed65f82b3e943239e4d

5、拼接HTTP请求
将所有参数值转换为UTF-8编码，然后拼装，通过浏览器访问该地址，即成功调用一次接口，如下：
``` json
https://open.youzan.com/api/entry/youzan.item/2.0.0/get?sign=ec9aabe3d7d54ed65f82b3e943239e4d&timestamp=2017-03-28%2013:52:03&v=1.0&app_id=tes&format=json&num_iid=3838293428
```
根据具体API文档中所写的请求地址，在最后拼接sign和入参请求即可。